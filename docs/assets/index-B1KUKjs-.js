(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const ie=`PrintYourBrackets 10x10 full
Seahawks (top) vs Patriots (left)
Payouts 1500 1500 1500 2300
Top Seahawks 3 0 7 4 2 9 1 5 8 6
Left Patriots 8 2 7 0 4 3 6 1 9 5
Jason D, Rick RBD, Bup, Judy Gibson, Andy, Hoss, JR, Wendy Dowland, Jaron Pagzant, Colton S.
Angler, Dirty Doug, Ryder, Mitz, Deb B, Todd Cordova, Jason D, Chari, Lance, Cliff Heather
Casey Shofield, Alec B, Jaron Pagzant, Ryo, Lukas Gadd, Todd Moser, Karen Wiet, Shannon, Cooper, Curt
JR, Tom Dowland, RC, BW Wolf, Chari, Linda Greg, Eric Molly, Curt, Milia Jackson, Ryder
Lance, Ryo Cousin, Mitz Bryant, Jason D, Briana B, Shayne Westberg, Tyson, Lyuba Gadd, Angler, Bup
Logan Gadd, Chari, Curt, Tenley Thompson, Bob T, Dave B, JR, Lance, Tine Arlene, Curt
Bup, Greg Diane, Cooper, Janean Dowland, Aaron Wiet, Jimmy Burke, Chari, Ryo, Andy, Mike Sonya
Terri Savitsky, Lance, JR, Blackthorse, Christina, Curt, Rick Murphy, Jason, Todd Cordova, Shannon
Curt, Jason D, Chari, Brooke Shofield, Bup, Jaron Pagzant, Jimmy Burke, Hoss, Ryo Captain, Eric B
Nathan Dowland, Shannon, Tammy Westberg, Lance, RC, Dirty Doug, Isaac S, Curt, JR, Turbo

---

Super Bowl LX $25 5x10 full
New England Patriots (top) vs Seattle Seahawks (left)
Payouts 250 250 250 490
Top New England Patriots 65 72 49 30 81
Left Seattle Seahawks 4 2 8 7 3 9 5 1 0 6
Smash, BroncosMom, Mitsman, Poppy, caron
Wsnider, nicolekc, Daniel Monto, Habolos, Poppy
Purple Peopl, The Blaz, SEAHAWKS!, King, Meredith
Purple Peopl, Habolos, King, Beau's, Nik
Wiet, SEAHAWKS!, Meredith, The Blaz, nicolekc
Brad, Wiet, Stupit Picks, Steve H, Dipped-In-Sa
Beau's, Tina, Wiet, Ron O., Tomeki
Brad, Kim E, Nik, TenTen10, Brad
Dylan, Mama Petie, Dipped-In-Sa, Smash, TenTen10
Takeo, Nik, caron, Tasha, Beau's

---

Super Bowl LX $50 5x5 reroll full
New England Patriots (top) vs Seattle Seahawks (left)
Payouts 310 310 310 310
Q1 Top 86 71 30 45 92, Left 16 97 04 52 83
Q2 Top 45 90 32 76 18, Left 95 76 38 21 04
Q3 Top 19 47 36 05 28, Left 12 80 74 93 65
Q4 Top 47 93 05 82 16, Left 06 84 59 23 17
Smash, King, Mitsman, Tomeki, Meredith
Amber, Wiet, The Blaz, nicolekc, Beau's
Wsnider, Purple Peopl, SEAHAWKS!, Stupit Picks, Steve H
Tina, The Blaz, Beau's, Habolos, Mama Petie
Takeo, Dylan, Nik, Brad, BroncosMom

---

Super Bowl LX $50 5x5 full
New England Patriots (top) vs Seattle Seahawks (left)
Payouts 310 310 310 310
Top New England Patriots 02 17 36 85 49
Left Seattle Seahawks 64 15 72 89 30
Nik, Takeo, Purple Peopl, Wsnider, Beau's
Eric, The Blaz, Tasha, Wiet, Dipped-In-Sa
Mitsman, Tina, Stupit Picks, The Blaz, Habolos
Ron O., Tomeki, King, Steve H, Mama Petie
Smash, SEAHAWKS!, Beau's, Meredith, nicolekc

---

Super Bowl LX $10 10x10 full
New England Patriots (top) vs Seattle Seahawks (left)
Payouts 200 200 200 390
Top New England Patriots 9 3 6 0 7 5 4 2 8 1
Left Seattle Seahawks 4 5 8 3 7 6 0 9 2 1
Smash, BroncosMom, BroncosMom, Beau's, caron, Eric, Meredith, Mitsman, Nik, SEAHAWKS!
Beau's, Wiet, TenTen10, nicolekc, Purple Peopl, Stupit Picks, caron, Nik, Habolos, Kim E
SEAHAWKS!, Habolos, Wiet, TenTen10, peteschaf, Purple Peopl, Daniel Monto, winthatdough, King, caron
caron, Meredith, Stupit Picks, Wiet, TenTen10, SEAHAWKS!, Purple Peopl, King, Mama Petie, Wsnider
peteschaf, nicolekc, Tina, Purple Peopl, Wiet, TenTen10, The Blaz, nicolekc, Mama Petie, Poppy
winthatdough, Mitsman, The Blaz, Purple Peopl, King, Wiet, TenTen10, Habolos, SEAHAWKS!, Poppy
Mitsman, Beau's, Habolos, The Blaz, Jodi, King, Mama Petie, Meredith, Smash, Nik
Tasha, Kim E, SEAHAWKS!, nicolekc, Stupit Picks, The Blaz, winthatdough, Beau's, Smash, Nik
Habolos, Ron O., Beau's, King, Mitsman, Steve H, The Blaz, nicolekc, Meredith, Mama Petie
Smash, Nik, Meredith, caron, Steve H, Tasha, peteschaf, BroncosMom, Poppy, Poppy`;function Q(e){return e.split(/\n\s*---\s*\n/).map(n=>n.trim()).filter(n=>n.length>0).map(Ne)}function Ne(e){const t=e.split(`
`).map(i=>i.trim()).filter(i=>i.length>0&&!i.startsWith("#"));if(t.length<2)throw new Error("Board needs at least a header and teams line");let n=0;const s=Ee(t[n++]),o=Le(t[n++]);s.topTeam=o.topTeam,s.leftTeam=o.leftTeam,n<t.length&&/^payouts?\b/i.test(t[n])&&(s.payouts=Me(t[n++]));const a=t.slice(n);if(a.length===0)throw new Error("Board must have square data or full board data");return Pe(a)?{config:s,fullBoard:Ae(a,s)}:{config:s,mySquares:ke(a,s)}}function Ee(e){let t=e,n;const s=t.match(/\$(\d+)/);s&&(n=parseInt(s[1]),t=t.replace(s[0]," "));let o=10,a=10;const i=t.match(/\b(5|10)\s*x\s*(5|10)\b/i);if(i)o=parseInt(i[1]),a=parseInt(i[2]),t=t.replace(i[0]," ");else{const u=t.match(/\b(25|50|100)\s*squares?\b/i);if(u){const d=parseInt(u[1]);d===25?(o=5,a=5):d===100?(o=10,a=10):(o=5,a=10),t=t.replace(u[0]," ")}}const l=/\bre-?roll\b/i.test(t);t=t.replace(/\bre-?roll\b/gi," "),t=t.replace(/\bfull\b/gi," ");let p=t.replace(/\s+/g," ").trim();return p||(p="Board"),{name:p,buyIn:n,cols:o,rows:a,reroll:l,topTeam:"",leftTeam:""}}function Le(e){const t=e.match(/(.+?)\s+vs\.?\s+(.+)/i);if(!t)throw new Error(`Expected "Team1 vs Team2", got: "${e}"`);let n=t[1].trim(),s=t[2].trim();const o=/\(left\)/i.test(n),a=/\(top\)/i.test(s),i=l=>l.replace(/\s*\((top|left)\)\s*/gi,"").trim();return n=i(n),s=i(s),o||a?{topTeam:s,leftTeam:n}:{topTeam:n,leftTeam:s}}function Me(e){const t=e.match(/^payouts?\s+(.+)/i);return t?t[1].split(/\s+/).map(n=>parseInt(n)).filter(n=>!isNaN(n)):[]}function Pe(e){const t=e[0];return/^top\s/i.test(t)||/^q[1-4]\s/i.test(t)}function ke(e,t){return e.map(n=>De(n,t))}function De(e,t){const n=xe(e,t),s=e.substring(0,n).trim(),o=e.substring(n+1).trim(),a=we(s,t.topTeam),i=we(o,t.leftTeam);if(t.reroll){if(a.length!==4||i.length!==4)throw new Error(`Reroll board needs 4 digit-groups per team. Got top=${a.length}, left=${i.length} in: "${e}"`);return{quarters:Array.from({length:4},(l,p)=>({topDigits:a[p],leftDigits:i[p]}))}}if(a.length!==1||i.length!==1)throw new Error(`Non-reroll board needs 1 digit-group per team. Got top=${a.length}, left=${i.length} in: "${e}"`);return{quarters:[{topDigits:a[0],leftDigits:i[0]}]}}function xe(e,t){const n=new RegExp(`,\\s*${Ce(t.leftTeam)}\\b`,"i"),s=e.match(n);if(s&&s.index!==void 0)return s.index;const o=e.indexOf(",");if(o===-1)throw new Error(`No comma separator in square line: "${e}"`);return o}function we(e,t){const n=new RegExp(`^${Ce(t)}\\s+`,"i");return e.replace(n,"").trim().split(/\s+/).map(se)}function se(e){if(e.length===1&&/\d/.test(e))return[parseInt(e)];if(e.length===2&&/\d\d/.test(e))return[parseInt(e[0]),parseInt(e[1])];throw new Error(`Invalid digit group "${e}": expected 1 or 2 digits`)}function Ae(e,t){let n=0;const s=[];if(t.reroll)for(let i=0;i<4;i++){if(n>=e.length)throw new Error(`Missing Q${i+1} line`);s.push(Ie(e[n++],t))}else{if(n+1>=e.length)throw new Error("Need Top and Left lines");const i=be(e[n++],t.cols),l=be(e[n++],t.rows);s.push({topNumbers:i,leftNumbers:l})}const o=[];for(let i=0;i<t.rows;i++){if(n>=e.length)throw new Error(`Missing grid row ${i+1}`);o.push(Re(e[n++],t.cols))}let a=[];return n<e.length&&/^mine\b/i.test(e[n])&&(a=e[n++].replace(/^mine\s+/i,"").split(",").map(l=>l.trim()).filter(l=>l.length>0)),{quarters:s,grid:o,mySquareNames:a}}function Ie(e,t){const s=e.replace(/^q[1-4]\s+/i,"").trim().match(/^top\s+(.*?)\s*,\s*left\s+(.*)/i);if(!s)throw new Error(`Expected "Q_ Top ..., Left ..." format in: "${e}"`);const o=ce(s[1].trim()),a=ce(s[2].trim()),i=o.split(/\s+/).map(se),l=a.split(/\s+/).map(se);if(i.length!==t.cols)throw new Error(`Expected ${t.cols} top numbers, got ${i.length}`);if(l.length!==t.rows)throw new Error(`Expected ${t.rows} left numbers, got ${l.length}`);return{topNumbers:i,leftNumbers:l}}function be(e,t){let n=e.replace(/^(top|left)\s+/i,"").trim();n=ce(n);const s=n.split(/\s+/).map(se);if(s.length!==t)throw new Error(`Expected ${t} number groups, got ${s.length} in: "${e}"`);return s}function ce(e){const t=e.search(/\d/);return t<=0?e:e.substring(t).trim()}function Re(e,t){if(e.includes(",")){const s=e.split(",").map(o=>o.trim()).filter(o=>o.length>0);if(s.length===t)return s}const n=e.split(/\s+/).filter(s=>s.length>0);if(n.length===t)return n;throw new Error(`Grid row needs ${t} names, couldn't parse: "${e}"`)}function Ce(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function G(e){return Math.abs(e)%10}function _(e,t){return e.config.reroll?t:0}function We(e,t,n,s,o){const a=G(t),i=G(n),l=e.topDigits.includes(a)&&e.leftDigits.includes(i);if(l)return{isWinner:!0,nearMisses:[]};const p=[];for(const u of[3,7]){const d=G(t+u);e.topDigits.includes(d)&&e.leftDigits.includes(i)&&p.push({team:s,points:u})}for(const u of[3,7]){const d=G(n+u);e.topDigits.includes(a)&&e.leftDigits.includes(d)&&p.push({team:o,points:u})}return{isWinner:l,nearMisses:p}}function Ge(e,t){if(!e.mySquares)return[];const n=_(e,t.quarter),{topTeam:s,leftTeam:o}=e.config;return e.mySquares.map(a=>{const i=a.quarters[n];return We(i,t.score.top,t.score.left,s,o)})}function Z(e,t){return e.findIndex(n=>n.includes(t))}function He(e,t,n,s,o){const a=G(t),i=G(n),l=Z(e.topNumbers,a),p=Z(e.leftNumbers,i),u={row:p,col:l},d=[];for(const y of[3,7]){const b=G(t+y),m=Z(e.topNumbers,b);m!==-1&&m!==l&&d.push({pos:{row:p,col:m},nearMiss:{team:s,points:y}})}for(const y of[3,7]){const b=G(n+y),m=Z(e.leftNumbers,b);m!==-1&&m!==p&&d.push({pos:{row:m,col:l},nearMiss:{team:o,points:y}})}return{winnerPos:u,nearMissPositions:d}}function ve(e,t){var y,b;if(!e.fullBoard)return new Map;const n=_(e,t.quarter),s=e.fullBoard.quarters[n],{topTeam:o,leftTeam:a}=e.config,i=He(s,t.score.top,t.score.left,o,a),l=new Set(e.fullBoard.mySquareNames.map(m=>m.toLowerCase())),p=new Map,u=`${i.winnerPos.row},${i.winnerPos.col}`,d=((y=e.fullBoard.grid[i.winnerPos.row])==null?void 0:y[i.winnerPos.col])??"";p.set(u,{isWinner:!0,isMine:l.has(d.toLowerCase()),nearMisses:[]});for(const m of i.nearMissPositions){const f=`${m.pos.row},${m.pos.col}`,$=((b=e.fullBoard.grid[m.pos.row])==null?void 0:b[m.pos.col])??"",S=p.get(f);S?S.nearMisses.push(m.nearMiss):p.set(f,{isWinner:!1,isMine:l.has($.toLowerCase()),nearMisses:[m.nearMiss]})}return p}function N(e){return e.length===2?`${e[0]}${e[1]}`:`${e[0]}`}function Te(e){return e.map(Fe).join(`
---
`)}function Fe(e){const t=[],n=e.config;let s=n.name;return n.buyIn!=null&&(s+=` $${n.buyIn}`),s+=` ${n.cols}x${n.rows}`,n.reroll&&(s+=" reroll"),e.fullBoard&&(s+=" full"),t.push(s),e.fullBoard?t.push(`${n.topTeam} (top) vs ${n.leftTeam} (left)`):t.push(`${n.topTeam} vs ${n.leftTeam}`),n.payouts&&n.payouts.length>0&&t.push("Payouts "+n.payouts.join(" ")),e.fullBoard?t.push(...ze(e.fullBoard,n)):e.mySquares&&t.push(...je(e.mySquares,n)),t.join(`
`)}function je(e,t){return e.map(n=>{if(t.reroll){const s=n.quarters.map(a=>N(a.topDigits)),o=n.quarters.map(a=>N(a.leftDigits));return`${t.topTeam} ${s.join(" ")}, ${t.leftTeam} ${o.join(" ")}`}else{const s=n.quarters[0];return`${t.topTeam} ${N(s.topDigits)}, ${t.leftTeam} ${N(s.leftDigits)}`}})}function ze(e,t){const n=[];if(e.quarters.length===1){const s=e.quarters[0];n.push(`Top ${t.topTeam} ${s.topNumbers.map(N).join(" ")}`),n.push(`Left ${t.leftTeam} ${s.leftNumbers.map(N).join(" ")}`)}else for(let s=0;s<e.quarters.length;s++){const o=e.quarters[s];n.push(`Q${s+1} Top ${o.topNumbers.map(N).join(" ")}, Left ${o.leftNumbers.map(N).join(" ")}`)}for(const s of e.grid)n.push(s.join(", "));return e.mySquareNames.length>0&&n.push("Mine "+e.mySquareNames.join(", ")),n}const Be=["Q1","Q2","Q3","Final"],oe="sb-squares-data",pe="sb-squares-state",le="sb-squares-defaults-hash-v2";let h=[],C={quarter:0,score:{top:0,left:0}},j="setup",Y=[null,null,null,null],ee=!1,H=null;function r(e,t,n){const s=document.createElement(e);if(typeof t=="string")t&&(s.className=t);else if(t)for(const[o,a]of Object.entries(t))o==="className"?s.className=a:s.setAttribute(o,a);if(n)for(const o of n)s.appendChild(typeof o=="string"?document.createTextNode(o):o);return s}function U(e){return document.createTextNode(e)}function P(e,t,n){const s=r("button",t,[e]);return s.type="button",s.addEventListener("click",n),s}function W(e,t){const n=document.createElement("input");if(n.type=e,t)for(const[s,o]of Object.entries(t))s==="className"?n.className=o:n.setAttribute(s,o);return n}function Ke(e){const t=document.createElement("select");for(const n of e){const s=document.createElement("option");s.value=n.value,s.textContent=n.label,t.appendChild(s)}return t}function F(e){const t=document.querySelector(".toast");t&&t.remove();const n=r("div","toast",[e]);document.body.appendChild(n),setTimeout(()=>n.remove(),2200)}function J(){if(h.length===0){localStorage.removeItem(oe),localStorage.removeItem(pe);return}localStorage.setItem(oe,Te(h)),V()}function V(){localStorage.setItem(pe,JSON.stringify({quarter:C.quarter,score:C.score,quarterScores:Y,gameFinalized:ee}))}function $e(){return localStorage.getItem(oe)}function Se(){const e=localStorage.getItem(pe);if(e)try{const t=JSON.parse(e);if(typeof t.quarter=="number"&&(C.quarter=t.quarter),t.score&&typeof t.score.top=="number"&&(C.score.top=t.score.top),t.score&&typeof t.score.left=="number"&&(C.score.left=t.score.left),Array.isArray(t.quarterScores))for(let n=0;n<4;n++){const s=t.quarterScores[n];s&&typeof s.top=="number"&&typeof s.left=="number"&&(Y[n]={top:s.top,left:s.left})}typeof t.gameFinalized=="boolean"&&(ee=t.gameFinalized)}catch{}}const ne=document.getElementById("app");function M(){ne.innerHTML="",ne.appendChild(Je()),ne.appendChild(Qe()),j==="setup"?ne.appendChild(Oe()):ne.appendChild(Ze())}function Je(){return r("div","banner",[r("h1","",["Super Bowl Squares"]),r("div","subtitle",["Track your squares, scores, and near-misses"])])}function Qe(){const e=r("div","tabs"),t=P("Setup",`${j==="setup"?"active":""}`,()=>{j="setup",M()}),n=P("Scoring",`${j==="scoring"?"active":""}`,()=>{if(h.length===0){F("Load or add boards first");return}j="scoring",M()});return e.appendChild(t),e.appendChild(n),e}function Oe(){const e=r("div","setup-panel"),t=$e();return t&&h.length===0&&e.appendChild(Ye(t)),e.appendChild(Ue()),e.appendChild(r("div","divider",[U("or")])),e.appendChild(_e()),h.length>0&&e.appendChild(Ve()),e}function Ye(e){const t=r("div","restore-bar");t.appendChild(r("span","",["Previously saved board data found."]));const n=r("div","restore-actions");return n.appendChild(P("Restore","btn btn-primary btn-sm",()=>{try{h=Q(e),J(),j="scoring",M()}catch(s){F("Error restoring: "+s.message)}})),n.appendChild(P("Dismiss","btn btn-secondary btn-sm",()=>{localStorage.removeItem(oe),M()})),t.appendChild(n),t}function Ue(){const e=r("div","setup-section");e.appendChild(r("h3","",["Paste Board Data"]));const t=document.createElement("textarea");t.placeholder=`Paste your board configuration here...

Example:
Office Pool $25 10x10
Chiefs vs Eagles
Top Chiefs 0 1 2 3 4 5 6 7 8 9
Left Eagles 0 1 2 3 4 5 6 7 8 9
Alice, Bob, ...`,t.rows=8,e.appendChild(t);const n=r("div","form-row mt-1");return n.appendChild(P("Add Boards","btn btn-primary",()=>{const s=t.value.trim();if(!s){F("Paste board data first");return}try{const o=Q(s);h.push(...o),J(),t.value="",h.length===o.length&&(j="scoring"),M(),F(`Added ${o.length} board(s) (${h.length} total)`)}catch(o){F("Parse error: "+o.message)}})),n.appendChild(P("Replace All","btn btn-secondary",()=>{const s=t.value.trim();if(!s){F("Paste board data first");return}try{h=Q(s),J(),j="scoring",M(),F(`Replaced with ${h.length} board(s)`)}catch(o){F("Parse error: "+o.message)}})),e.appendChild(n),e}function _e(){const e=r("div","setup-section");e.appendChild(r("h3","",["Set Up Manually"]));const t=W("text",{placeholder:"Board name (e.g. Office Pool)",className:""});t.style.flex="1";const n=r("div","form-row",[r("label","",["Name"]),t]);e.appendChild(n);const s=W("number",{placeholder:"25",className:""});s.style.width="6rem";const o=r("div","form-row",[r("label","",["Buy-in ($)"]),s]);e.appendChild(o);const a=Ke([{value:"10x10",label:"10x10 (100 squares)"},{value:"5x5",label:"5x5 (25 squares)"},{value:"5x10",label:"5x10 (50 squares)"},{value:"10x5",label:"10x5 (50 squares)"}]),i=r("div","form-row",[r("label","",["Size"]),a]);e.appendChild(i);const l=W("checkbox"),p=r("div","form-row",[r("label","",["Reroll"]),l,r("span","text-sm text-muted",["Numbers change each quarter"])]);e.appendChild(p);const u=W("text",{placeholder:"Chiefs",className:""});u.style.flex="1";const d=W("text",{placeholder:"Eagles",className:""});d.style.flex="1";const y=r("div","form-row",[r("label","",["Teams"]),u,r("span","vs-label",["vs"]),d]);e.appendChild(y);const b=W("text",{placeholder:"50 100 150 200 (optional)",className:""});b.style.flex="1";const m=r("div","form-row",[r("label","",["Payouts"]),b]);e.appendChild(m);const f=W("radio",{name:"board-mode",value:"mine"});f.checked=!0;const $=W("radio",{name:"board-mode",value:"full"}),S=r("div","radio-group mt-2",[r("label","",[f,U(" Just my squares")]),r("label","",[$,U(" Full board")])]);e.appendChild(S);const L=r("div","mt-1");L.id="my-squares-input";const k=document.createElement("textarea");k.placeholder=`One square per line:
Chiefs 3, Eagles 7
Chiefs 0, Eagles 2`,k.rows=6,L.appendChild(r("label","text-sm text-muted mb-1",["Enter your squares (one per line):"])),L.appendChild(k),e.appendChild(L);const c=r("div","mt-1 hidden");c.id="full-board-input";const B=W("text",{placeholder:"0 1 2 3 4 5 6 7 8 9",className:""});B.style.flex="1",c.appendChild(r("div","form-row",[r("label","",["Top #s"]),B]));const v=W("text",{placeholder:"0 1 2 3 4 5 6 7 8 9",className:""});v.style.flex="1",c.appendChild(r("div","form-row",[r("label","",["Left #s"]),v]));const x=document.createElement("textarea");x.placeholder=`Grid rows (comma-separated names):
Alice, Bob, Carol, Dave, Eve, Frank, Grace, Hank, Ivy, Jack
...`,x.rows=6,c.appendChild(r("label","text-sm text-muted mb-1",["Grid (one row per line):"])),c.appendChild(x);const w=W("text",{placeholder:"Your name(s), comma-separated",className:"w-full mt-1"});c.appendChild(r("div","form-row mt-1",[r("label","",["Mine"]),w])),e.appendChild(c),f.addEventListener("change",()=>{L.classList.remove("hidden"),c.classList.add("hidden")}),$.addEventListener("change",()=>{L.classList.add("hidden"),c.classList.remove("hidden")});const q=r("div","form-row mt-2");return q.appendChild(P("Add Board","btn btn-primary",()=>{try{const D=Xe(t,s,a,l,u,d,b,f,k,B,v,x,w);h.push(D),J(),M(),F("Board added")}catch(D){F("Error: "+D.message)}})),e.appendChild(q),e}function Xe(e,t,n,s,o,a,i,l,p,u,d,y,b){const m=e.value.trim()||"Board",f=t.value?parseInt(t.value):void 0,[$,S]=n.value.split("x").map(Number),L=s.checked,k=o.value.trim()||"Team A",c=a.value.trim()||"Team B",B=i.value.trim(),v=B?B.split(/[\s,]+/).map(Number).filter(w=>!isNaN(w)):void 0;if(l.checked){const w=[];let q=m;f!=null&&(q+=` $${f}`),q+=` ${$}x${S}`,L&&(q+=" reroll"),w.push(q),w.push(`${k} vs ${c}`),v&&v.length>0&&w.push("Payouts "+v.join(" "));const D=p.value.trim().split(`
`).filter(A=>A.trim());if(D.length===0)throw new Error("Enter at least one square");return w.push(...D),Q(w.join(`
`))[0]}else{const w=[];let q=m;f!=null&&(q+=` $${f}`),q+=` ${$}x${S}`,L&&(q+=" reroll"),q+=" full",w.push(q),w.push(`${k} (top) vs ${c} (left)`),v&&v.length>0&&w.push("Payouts "+v.join(" "));const D=u.value.trim(),A=d.value.trim();if(!D||!A)throw new Error("Enter top and left numbers");w.push(`Top ${k} ${D}`),w.push(`Left ${c} ${A}`);const z=y.value.trim().split(`
`).filter(O=>O.trim());if(z.length!==S)throw new Error(`Expected ${S} grid rows, got ${z.length}`);w.push(...z);const X=b.value.trim();return X&&w.push("Mine "+X),Q(w.join(`
`))[0]}}function Ve(){var n;const e=r("div","setup-section");e.appendChild(r("h3","",[`Boards (${h.length})`]));for(let s=0;s<h.length;s++){const o=h[s],a=r("div","board-summary"),i=r("div","board-info",[U(`${o.config.name} — ${o.config.cols}x${o.config.rows}`)]),l=r("div","board-meta",[U(`${o.config.topTeam} vs ${o.config.leftTeam}`+(o.fullBoard?" (full board)":` (${((n=o.mySquares)==null?void 0:n.length)??0} squares)`)+(o.config.buyIn?` | $${o.config.buyIn}`:""))]),p=P("Remove","btn btn-danger btn-sm",()=>{h.splice(s,1),J(),M()}),u=r("div","",[i,l]);a.appendChild(u),a.appendChild(p),e.appendChild(a)}const t=r("div","form-row mt-2");return t.appendChild(P("Copy Board Data","btn btn-secondary",()=>{const s=Te(h);navigator.clipboard.writeText(s).then(()=>{F("Board data copied to clipboard")}).catch(()=>{F("Could not copy — check permissions")})})),t.appendChild(P("Start Scoring","btn btn-primary",()=>{j="scoring",M()})),e.appendChild(t),e}function Ze(){const e=r("div","scoring-panel");e.appendChild(ot());const t=et();t&&e.appendChild(t);const n=st();n&&e.appendChild(n);for(const s of h)e.appendChild(rt(s));return e}function et(){var s,o,a;const e=ee?4:C.quarter;if(Y.slice(0,e).filter(Boolean).length===0)return null;const n=r("div","past-winners");n.appendChild(r("div","past-winners-title",["Quarter Results"]));for(let i=0;i<e;i++){const l=Y[i];if(!l)continue;const p=h.length>0?h[0].config.topTeam:"Top",u=h.length>0?h[0].config.leftTeam:"Left",d=K(p),y=K(u);G(l.top),G(l.left);const b=r("div","past-winners-quarter");b.appendChild(r("span","pw-label",[Be[i]])),b.appendChild(r("span","pw-score",[`${d} ${l.top} - ${y} ${l.left}`]));const m=[];for(const f of h){const $=_(f,i),S=f.fullBoard?new Set(f.fullBoard.mySquareNames.map(B=>B.toLowerCase())):new Set,L=nt(f,l),k=G(L.top),c=G(L.left);if(f.fullBoard){const B=f.fullBoard.quarters[$],v=Z(B.topNumbers,k),x=Z(B.leftNumbers,c);if(v>=0&&x>=0){const w=((s=f.fullBoard.grid[x])==null?void 0:s[v])??"???",q=S.has(w.toLowerCase()),D=(o=f.config.payouts)==null?void 0:o[i];let A=w;D!=null&&(A+=` ($${D})`),q&&(A="★ "+A),m.push(A)}}else if(f.mySquares){const B=f.mySquares.map(v=>v.quarters[$]);for(const v of B)if(v.topDigits.includes(k)&&v.leftDigits.includes(c)){const x=(a=f.config.payouts)==null?void 0:a[i];let w=`${f.config.name}`;x!=null&&(w+=` ($${x})`),w="★ "+w,m.push(w);break}}}if(m.length>0)for(const f of m){const $=f.startsWith("★");b.appendChild(r("span",$?"pw-winner pw-mine":"pw-winner",[f]))}n.appendChild(b)}return n}const tt={"arizona cardinals":"ARI",cardinals:"ARI","atlanta falcons":"ATL",falcons:"ATL","baltimore ravens":"BAL",ravens:"BAL","buffalo bills":"BUF",bills:"BUF","carolina panthers":"CAR",panthers:"CAR","chicago bears":"CHI",bears:"CHI","cincinnati bengals":"CIN",bengals:"CIN","cleveland browns":"CLE",browns:"CLE","dallas cowboys":"DAL",cowboys:"DAL","denver broncos":"DEN",broncos:"DEN","detroit lions":"DET",lions:"DET","green bay packers":"GB",packers:"GB","houston texans":"HOU",texans:"HOU","indianapolis colts":"IND",colts:"IND","jacksonville jaguars":"JAX",jaguars:"JAX","kansas city chiefs":"KC",chiefs:"KC","las vegas raiders":"LV",raiders:"LV","los angeles chargers":"LAC",chargers:"LAC","los angeles rams":"LAR",rams:"LAR","miami dolphins":"MIA",dolphins:"MIA","minnesota vikings":"MIN",vikings:"MIN","new england patriots":"NE",patriots:"NE","new orleans saints":"NO",saints:"NO","new york giants":"NYG",giants:"NYG","new york jets":"NYJ",jets:"NYJ","philadelphia eagles":"PHI",eagles:"PHI","pittsburgh steelers":"PIT",steelers:"PIT","san francisco 49ers":"SF","49ers":"SF","seattle seahawks":"SEA",seahawks:"SEA","tampa bay buccaneers":"TB",buccaneers:"TB",bucs:"TB","tennessee titans":"TEN",titans:"TEN","washington commanders":"WAS",commanders:"WAS"};function K(e){const t=tt[e.toLowerCase()];return t||e}function qe(e){if(h.length===0)return!1;const t=K(h[0].config.topTeam),n=K(h[0].config.leftTeam),s=K(e.config.topTeam),o=K(e.config.leftTeam);return s===n&&o===t}function ue(e,t){const n=t??C;return qe(e)?{quarter:n.quarter,score:{top:n.score.left,left:n.score.top}}:n}function nt(e,t){return qe(e)?{top:t.left,left:t.top}:t}function st(){var S,L,k;const e=[],t=G(C.score.top),n=G(C.score.left),s=H?H.top:t,o=H?H.left:n,a=h.length>0?h[0].config.topTeam:"Top",i=h.length>0?h[0].config.leftTeam:"Left",l=K(a),p=K(i);for(const c of h){let B=function(g){const T=g.teamA===l,E=T?D:A,I=T?A:D;return g.digitsA.includes(E)&&g.digitGroupsB.some(R=>R.includes(I))};const v=_(c,C.quarter),x=K(c.config.topTeam),w=K(c.config.leftTeam),q=x===p&&w===l,D=s,A=o,z=[];if(c.mySquares&&c.mySquares.length>0)for(const g of c.mySquares){const T=g.quarters[v];z.push({firstDigits:q?T.leftDigits:T.topDigits,secondDigits:q?T.topDigits:T.leftDigits})}else if(c.fullBoard&&c.fullBoard.mySquareNames.length>0){const g=c.fullBoard,T=g.quarters[v],E=new Set(g.mySquareNames.map(I=>I.toLowerCase()));for(let I=0;I<c.config.rows;I++)for(let R=0;R<c.config.cols;R++){const ae=((S=g.grid[I])==null?void 0:S[R])??"";E.has(ae.toLowerCase())&&z.push({firstDigits:q?T.leftNumbers[I]:T.topNumbers[R],secondDigits:q?T.topNumbers[R]:T.leftNumbers[I]})}}if(z.length===0)continue;const X=new Map;for(const g of z){const T=N(g.firstDigits);let E=X.get(T);E||(E={firstDigits:g.firstDigits,leftGroups:[]},X.set(T,E));const I=N(g.secondDigits);E.leftGroups.some(R=>N(R)===I)||E.leftGroups.push(g.secondDigits)}const O=[],de=[];for(const[g,T]of X)T.leftGroups.length>1?O.push({teamA:l,digitsA:T.firstDigits,teamB:p,digitGroupsB:T.leftGroups}):de.push({firstKey:g,firstDigits:T.firstDigits,secondDigits:T.leftGroups[0]});const re=new Map;for(const g of de){const T=N(g.secondDigits);let E=re.get(T);E||(E={secondDigits:g.secondDigits,firstGroups:[]},re.set(T,E));const I=N(g.firstDigits);E.firstGroups.some(R=>N(R)===I)||E.firstGroups.push(g.firstDigits)}for(const[,g]of re)g.firstGroups.length>1?O.push({teamA:p,digitsA:g.secondDigits,teamB:l,digitGroupsB:g.firstGroups}):O.push({teamA:l,digitsA:g.firstGroups[0],teamB:p,digitGroupsB:[g.secondDigits]});const fe=O.some(B),me=["digit-summary-board"];fe&&me.push("has-winner");const te=r("div",me.join(" "));te.appendChild(r("div","digit-summary-name",[c.config.name]));const he=[`${c.config.cols}x${c.config.rows}`,c.config.reroll?"reroll":"",c.config.buyIn?`$${c.config.buyIn}`:""].filter(Boolean),ge=(L=c.config.payouts)==null?void 0:L[C.quarter];if(ge!=null&&he.push(`$${ge} this quarter`),te.appendChild(r("div","digit-summary-detail",[he.join(" · ")])),fe){const g=(k=c.config.payouts)==null?void 0:k[C.quarter],T=g!=null?`IN THE MONEY — $${g}`:"IN THE MONEY";te.appendChild(r("div","digit-summary-status winner",[T]))}const ye=r("div","digit-summary-pairs");for(const g of O){const T=B(g),E=r("div",`digit-summary-pair${T?" pair-hit":""}`);if(E.appendChild(r("span","ds-team",[g.teamA])),E.appendChild(r("span","ds-digit",[N(g.digitsA)])),E.appendChild(r("span","ds-sep",["/"])),E.appendChild(r("span","ds-team",[g.teamB])),g.digitGroupsB.length===1)E.appendChild(r("span","ds-digit",[N(g.digitGroupsB[0])]));else{const I=g.digitGroupsB.map(R=>N(R)).sort((R,ae)=>parseInt(R)-parseInt(ae));E.appendChild(r("span","ds-digit",["["+I.join(", ")+"]"]))}ye.appendChild(E)}te.appendChild(ye),e.push(te)}if(e.length===0)return null;const u=r("div","digit-summary"),d=r("div","digit-summary-header");d.appendChild(r("div","digit-summary-title",["My Squares This Quarter"]));const y=r("div","preview-picker");function b(c,B){const v=H&&H[c]===B;return P(String(B),`preview-digit${v?" active":""}`,()=>{H={...H??{top:t,left:n},[c]:B},M()})}const m=r("div","preview-row");m.appendChild(r("span","preview-label",[l]));for(let c=0;c<10;c++)m.appendChild(b("top",c));y.appendChild(m);const f=r("div","preview-row");f.appendChild(r("span","preview-label",[p]));for(let c=0;c<10;c++)f.appendChild(b("left",c));if(y.appendChild(f),H){const c=P("×","preview-clear",()=>{H=null,M()});y.appendChild(c)}d.appendChild(y),u.appendChild(d),H&&u.appendChild(r("div","preview-notice",[`Preview: ${l} ${H.top} / ${p} ${H.left}`]));const $=r("div","digit-summary-grid");for(const c of e)$.appendChild(c);return u.appendChild($),u}function ot(){const e=r("div","scoring-header"),t=h.length>0?h[0].config.topTeam:"Top",n=h.length>0?h[0].config.leftTeam:"Left",s=W("number",{className:"score-input",value:String(C.score.top)});s.min="0";const o=W("number",{className:"score-input",value:String(C.score.left)});o.min="0";function a(){C.score.top=parseInt(s.value)||0,C.score.left=parseInt(o.value)||0,V()}const i=r("div","quarter-bar"),l=r("span","quarter-label",[Be[C.quarter]]),p=r("div","flex gap-sm");C.quarter>0&&p.appendChild(P("Prev Quarter","btn btn-secondary btn-sm",()=>{a(),C.quarter--,V(),M()})),C.quarter<3?p.appendChild(P("Next Quarter","btn btn-secondary btn-sm",()=>{a(),Y[C.quarter]={...C.score},C.quarter++,V(),M()})):ee?p.appendChild(P("Undo Finalize","btn btn-secondary btn-sm",()=>{ee=!1,Y[3]=null,V(),M()})):p.appendChild(P("Finalize Game","btn btn-primary btn-sm",()=>{a(),Y[3]={...C.score},ee=!0,V(),M()})),i.appendChild(l),i.appendChild(p),e.appendChild(i);const u=r("div","score-row"),d=r("div","score-group",[r("label","",[t]),s]),y=r("span","score-dash",["–"]),b=r("div","score-group",[o,r("label","",[n])]),m=P("Update","btn btn-primary btn-sm",()=>{a(),M()}),f=$=>{$.key==="Enter"&&(a(),M())};return s.addEventListener("keydown",f),o.addEventListener("keydown",f),u.appendChild(d),u.appendChild(y),u.appendChild(b),u.appendChild(m),e.appendChild(u),e}function rt(e){const t=r("div","board-card"),n=[`${e.config.cols}x${e.config.rows}`,e.config.reroll?"reroll":"",e.config.buyIn?`$${e.config.buyIn}`:""].filter(Boolean).join(" | ");if(t.appendChild(r("h3","",[e.config.name])),t.appendChild(r("div","card-meta",[`${e.config.topTeam} vs ${e.config.leftTeam} — ${n}`])),e.config.payouts&&e.config.payouts.length>0){const s=["Q1","Q2","Q3","Final"],o=e.config.payouts.map((a,i)=>`${s[i]||`Q${i+1}`}: $${a}`).join(" | ");t.appendChild(r("div","card-meta",[o]))}return e.fullBoard?(t.appendChild(lt(e)),t.appendChild(at(e)),t.appendChild(ct(e))):e.mySquares&&t.appendChild(it(e)),t}function at(e){const t=e.fullBoard,n=r("div","form-row mt-1 mine-editor");n.appendChild(r("label","text-sm",["Mine:"]));const s=W("text",{placeholder:"Your names, comma-separated",className:"mine-input",value:t.mySquareNames.join(", ")});s.style.flex="1";const o=P("Set","btn btn-secondary btn-sm",()=>{t.mySquareNames=s.value.split(",").map(a=>a.trim()).filter(a=>a.length>0),J(),M(),F("Updated tracked squares")});return n.appendChild(s),n.appendChild(o),n}function it(e){const t=Ge(e,ue(e)),n=r("ul","square-list");return e.mySquares.forEach((s,o)=>{const a=t[o],i=_(e,C.quarter),l=s.quarters[i],p=`${e.config.topTeam} ${N(l.topDigits)}, ${e.config.leftTeam} ${N(l.leftDigits)}`,u=document.createElement("li");if(a.isWinner){u.className="status-winner";let d=`★ WINNER: ${p}`;e.config.payouts&&e.config.payouts[C.quarter]!=null&&(d+=` — $${e.config.payouts[C.quarter]}`),u.textContent=d}else if(a.nearMisses.length>0){u.className="status-near";const d=a.nearMisses.map(y=>`${y.team} +${y.points}`).join(", ");u.textContent=`○ Near: ${p} (${d})`}else u.className="status-dim",u.textContent=`· ${p}`;n.appendChild(u)}),n}function lt(e){var $;const t=e.fullBoard,n=_(e,C.quarter),s=t.quarters[n],o=ve(e,ue(e)),a=new Set(t.mySquareNames.map(S=>S.toLowerCase())),i=r("div","grid-table-wrapper"),l=r("table","grid-table"),p=document.createElement("thead"),u=document.createElement("tr"),d=document.createElement("th");d.className="corner",u.appendChild(d);const y=document.createElement("th");y.className="team-label-top",y.colSpan=e.config.cols,y.textContent=`← ${e.config.topTeam} →`,u.appendChild(y),p.appendChild(u);const b=document.createElement("tr"),m=document.createElement("th");m.className="corner",m.innerHTML=`<span style="font-size:0.5rem">${e.config.leftTeam}</span>`,b.appendChild(m);for(let S=0;S<e.config.cols;S++){const L=document.createElement("th");L.textContent=N(s.topNumbers[S]),b.appendChild(L)}p.appendChild(b),l.appendChild(p);const f=document.createElement("tbody");for(let S=0;S<e.config.rows;S++){const L=document.createElement("tr"),k=document.createElement("th");k.textContent=N(s.leftNumbers[S]),L.appendChild(k);for(let c=0;c<e.config.cols;c++){const B=document.createElement("td"),v=(($=t.grid[S])==null?void 0:$[c])??"";B.textContent=v,B.title=v;const x=`${S},${c}`,w=o.get(x),q=["cell-clickable"],D=a.has(v.toLowerCase());w!=null&&w.isWinner?q.push("cell-winner"):w&&w.nearMisses.length>0&&q.push("cell-near"),D&&q.push("cell-mine"),B.className=q.join(" "),B.addEventListener("click",()=>{if(!v)return;const A=v.toLowerCase();a.has(A)?t.mySquareNames=t.mySquareNames.filter(z=>z.toLowerCase()!==A):t.mySquareNames.push(v),J(),M()}),L.appendChild(B)}f.appendChild(L)}return l.appendChild(f),i.appendChild(l),i}function ct(e){var p,u;const t=e.fullBoard,n=_(e,C.quarter),s=t.quarters[n],o=ve(e,ue(e)),a=new Set(t.mySquareNames.map(d=>d.toLowerCase())),i=r("div","status-summary");for(const[d,y]of o.entries()){const[b,m]=d.split(",").map(Number),f=((p=t.grid[b])==null?void 0:p[m])??"???";if(y.isWinner){const $=a.has(f.toLowerCase()),S=r("div",$?"status-winner":"",[U(`★ Winner: ${f} [${N(s.topNumbers[m])}, ${N(s.leftNumbers[b])}]`)]);$&&e.config.payouts&&e.config.payouts[C.quarter]!=null&&S.appendChild(U(` — $${e.config.payouts[C.quarter]}`)),i.appendChild(S)}}const l=[];for(const[d,y]of o.entries())if(y.nearMisses.length>0){const[b,m]=d.split(",").map(Number),f=((u=t.grid[b])==null?void 0:u[m])??"???";if(a.has(f.toLowerCase())){const $=y.nearMisses.map(S=>`${S.team} +${S.points}`).join(", ");l.push(`○ ${f} [${N(s.topNumbers[m])}, ${N(s.leftNumbers[b])}] (${$})`)}}if(l.length>0)for(const d of l)i.appendChild(r("div","status-near",[d]));if(a.size>0&&l.length===0){let d=!1;for(const[,y]of o.entries())y.isWinner&&y.isMine&&(d=!0);d||i.appendChild(r("div","status-dim text-sm",["No near-misses for your squares this quarter."]))}return i}function pt(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t.toString(36)}function ut(){const e=pt(ie);if(localStorage.getItem(le)!==e){h=Q(ie),J(),localStorage.setItem(le,e),j="scoring",Se(),M();return}const n=$e();if(n)try{h=Q(n),j="scoring"}catch{}h.length===0&&(h=Q(ie),J(),j="scoring"),localStorage.setItem(le,e),Se(),M()}ut();
