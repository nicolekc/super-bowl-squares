(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function G(e){return e.split(/\n\s*---\s*\n/).map(n=>n.trim()).filter(n=>n.length>0).map(ee)}function ee(e){const t=e.split(`
`).map(i=>i.trim()).filter(i=>i.length>0&&!i.startsWith("#"));if(t.length<2)throw new Error("Board needs at least a header and teams line");let n=0;const r=te(t[n++]),s=ne(t[n++]);r.topTeam=s.topTeam,r.leftTeam=s.leftTeam,n<t.length&&/^payouts?\b/i.test(t[n])&&(r.payouts=re(t[n++]));const o=t.slice(n);if(o.length===0)throw new Error("Board must have square data or full board data");return se(o)?{config:r,fullBoard:le(o,r)}:{config:r,mySquares:oe(o,r)}}function te(e){let t=e,n;const r=t.match(/\$(\d+)/);r&&(n=parseInt(r[1]),t=t.replace(r[0]," "));let s=10,o=10;const i=t.match(/\b(5|10)\s*x\s*(5|10)\b/i);if(i)s=parseInt(i[1]),o=parseInt(i[2]),t=t.replace(i[0]," ");else{const d=t.match(/\b(25|50|100)\s*squares?\b/i);if(d){const p=parseInt(d[1]);p===25?(s=5,o=5):p===100?(s=10,o=10):(s=5,o=10),t=t.replace(d[0]," ")}}const l=/\bre-?roll\b/i.test(t);t=t.replace(/\bre-?roll\b/gi," "),t=t.replace(/\bfull\b/gi," ");let u=t.replace(/\s+/g," ").trim();return u||(u="Board"),{name:u,buyIn:n,cols:s,rows:o,reroll:l,topTeam:"",leftTeam:""}}function ne(e){const t=e.match(/(.+?)\s+vs\.?\s+(.+)/i);if(!t)throw new Error(`Expected "Team1 vs Team2", got: "${e}"`);let n=t[1].trim(),r=t[2].trim();const s=/\(left\)/i.test(n),o=/\(top\)/i.test(r),i=l=>l.replace(/\s*\((top|left)\)\s*/gi,"").trim();return n=i(n),r=i(r),s||o?{topTeam:r,leftTeam:n}:{topTeam:n,leftTeam:r}}function re(e){const t=e.match(/^payouts?\s+(.+)/i);return t?t[1].split(/\s+/).map(n=>parseInt(n)).filter(n=>!isNaN(n)):[]}function se(e){const t=e[0];return/^top\s/i.test(t)||/^q[1-4]\s/i.test(t)}function oe(e,t){return e.map(n=>ae(n,t))}function ae(e,t){const n=ie(e,t),r=e.substring(0,n).trim(),s=e.substring(n+1).trim(),o=Y(r,t.topTeam),i=Y(s,t.leftTeam);if(t.reroll){if(o.length!==4||i.length!==4)throw new Error(`Reroll board needs 4 digit-groups per team. Got top=${o.length}, left=${i.length} in: "${e}"`);return{quarters:Array.from({length:4},(l,u)=>({topDigits:o[u],leftDigits:i[u]}))}}if(o.length!==1||i.length!==1)throw new Error(`Non-reroll board needs 1 digit-group per team. Got top=${o.length}, left=${i.length} in: "${e}"`);return{quarters:[{topDigits:o[0],leftDigits:i[0]}]}}function ie(e,t){const n=new RegExp(`,\\s*${K(t.leftTeam)}\\b`,"i"),r=e.match(n);if(r&&r.index!==void 0)return r.index;const s=e.indexOf(",");if(s===-1)throw new Error(`No comma separator in square line: "${e}"`);return s}function Y(e,t){const n=new RegExp(`^${K(t)}\\s+`,"i");return e.replace(n,"").trim().split(/\s+/).map(O)}function O(e){if(e.length===1&&/\d/.test(e))return[parseInt(e)];if(e.length===2&&/\d\d/.test(e))return[parseInt(e[0]),parseInt(e[1])];throw new Error(`Invalid digit group "${e}": expected 1 or 2 digits`)}function le(e,t){let n=0;const r=[];if(t.reroll)for(let i=0;i<4;i++){if(n>=e.length)throw new Error(`Missing Q${i+1} line`);r.push(ce(e[n++],t))}else{if(n+1>=e.length)throw new Error("Need Top and Left lines");const i=J(e[n++],t.cols),l=J(e[n++],t.rows);r.push({topNumbers:i,leftNumbers:l})}const s=[];for(let i=0;i<t.rows;i++){if(n>=e.length)throw new Error(`Missing grid row ${i+1}`);s.push(ue(e[n++],t.cols))}let o=[];return n<e.length&&/^mine\b/i.test(e[n])&&(o=e[n++].replace(/^mine\s+/i,"").split(",").map(l=>l.trim()).filter(l=>l.length>0)),{quarters:r,grid:s,mySquareNames:o}}function ce(e,t){const r=e.replace(/^q[1-4]\s+/i,"").trim().match(/^top\s+(.*?)\s*,\s*left\s+(.*)/i);if(!r)throw new Error(`Expected "Q_ Top ..., Left ..." format in: "${e}"`);const s=U(r[1].trim()),o=U(r[2].trim()),i=s.split(/\s+/).map(O),l=o.split(/\s+/).map(O);if(i.length!==t.cols)throw new Error(`Expected ${t.cols} top numbers, got ${i.length}`);if(l.length!==t.rows)throw new Error(`Expected ${t.rows} left numbers, got ${l.length}`);return{topNumbers:i,leftNumbers:l}}function J(e,t){let n=e.replace(/^(top|left)\s+/i,"").trim();n=U(n);const r=n.split(/\s+/).map(O);if(r.length!==t)throw new Error(`Expected ${t} number groups, got ${r.length} in: "${e}"`);return r}function U(e){const t=e.search(/\d/);return t<=0?e:e.substring(t).trim()}function ue(e,t){if(e.includes(",")){const r=e.split(",").map(s=>s.trim()).filter(s=>s.length>0);if(r.length===t)return r}const n=e.split(/\s+/).filter(r=>r.length>0);if(n.length===t)return n;throw new Error(`Grid row needs ${t} names, couldn't parse: "${e}"`)}function K(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D(e){return Math.abs(e)%10}function W(e,t){return e.config.reroll?t:0}function pe(e,t,n,r,s){const o=D(t),i=D(n),l=e.topDigits.includes(o)&&e.leftDigits.includes(i);if(l)return{isWinner:!0,nearMisses:[]};const u=[];for(const d of[3,7]){const p=D(t+d);e.topDigits.includes(p)&&e.leftDigits.includes(i)&&u.push({team:r,points:d})}for(const d of[3,7]){const p=D(n+d);e.topDigits.includes(o)&&e.leftDigits.includes(p)&&u.push({team:s,points:d})}return{isWinner:l,nearMisses:u}}function de(e,t){if(!e.mySquares)return[];const n=W(e,t.quarter),{topTeam:r,leftTeam:s}=e.config;return e.mySquares.map(o=>{const i=o.quarters[n];return pe(i,t.score.top,t.score.left,r,s)})}function Q(e,t){return e.findIndex(n=>n.includes(t))}function me(e,t,n,r,s){const o=D(t),i=D(n),l=Q(e.topNumbers,o),u=Q(e.leftNumbers,i),d={row:u,col:l},p=[];for(const m of[3,7]){const h=D(t+m),c=Q(e.topNumbers,h);c!==-1&&c!==l&&p.push({pos:{row:u,col:c},nearMiss:{team:r,points:m}})}for(const m of[3,7]){const h=D(n+m),c=Q(e.leftNumbers,h);c!==-1&&c!==u&&p.push({pos:{row:c,col:l},nearMiss:{team:s,points:m}})}return{winnerPos:d,nearMissPositions:p}}function V(e,t){var m,h;if(!e.fullBoard)return new Map;const n=W(e,t.quarter),r=e.fullBoard.quarters[n],{topTeam:s,leftTeam:o}=e.config,i=me(r,t.score.top,t.score.left,s,o),l=new Set(e.fullBoard.mySquareNames.map(c=>c.toLowerCase())),u=new Map,d=`${i.winnerPos.row},${i.winnerPos.col}`,p=((m=e.fullBoard.grid[i.winnerPos.row])==null?void 0:m[i.winnerPos.col])??"";u.set(d,{isWinner:!0,isMine:l.has(p.toLowerCase()),nearMisses:[]});for(const c of i.nearMissPositions){const f=`${c.pos.row},${c.pos.col}`,C=((h=e.fullBoard.grid[c.pos.row])==null?void 0:h[c.pos.col])??"",b=u.get(f);b?b.nearMisses.push(c.nearMiss):u.set(f,{isWinner:!1,isMine:l.has(C.toLowerCase()),nearMisses:[c.nearMiss]})}return u}function $(e){return e.length===2?`${e[0]}${e[1]}`:`${e[0]}`}function X(e){return e.map(fe).join(`
---
`)}function fe(e){const t=[],n=e.config;let r=n.name;return n.buyIn!=null&&(r+=` $${n.buyIn}`),r+=` ${n.cols}x${n.rows}`,n.reroll&&(r+=" reroll"),e.fullBoard&&(r+=" full"),t.push(r),e.fullBoard?t.push(`${n.topTeam} (top) vs ${n.leftTeam} (left)`):t.push(`${n.topTeam} vs ${n.leftTeam}`),n.payouts&&n.payouts.length>0&&t.push("Payouts "+n.payouts.join(" ")),e.fullBoard?t.push(...ge(e.fullBoard,n)):e.mySquares&&t.push(...he(e.mySquares,n)),t.join(`
`)}function he(e,t){return e.map(n=>{if(t.reroll){const r=n.quarters.map(o=>$(o.topDigits)),s=n.quarters.map(o=>$(o.leftDigits));return`${t.topTeam} ${r.join(" ")}, ${t.leftTeam} ${s.join(" ")}`}else{const r=n.quarters[0];return`${t.topTeam} ${$(r.topDigits)}, ${t.leftTeam} ${$(r.leftDigits)}`}})}function ge(e,t){const n=[];if(e.quarters.length===1){const r=e.quarters[0];n.push(`Top ${t.topTeam} ${r.topNumbers.map($).join(" ")}`),n.push(`Left ${t.leftTeam} ${r.leftNumbers.map($).join(" ")}`)}else for(let r=0;r<e.quarters.length;r++){const s=e.quarters[r];n.push(`Q${r+1} Top ${s.topNumbers.map($).join(" ")}, Left ${s.leftNumbers.map($).join(" ")}`)}for(const r of e.grid)n.push(r.join(", "));return e.mySquareNames.length>0&&n.push("Mine "+e.mySquareNames.join(", ")),n}const we=["Q1","Q2","Q3","Final"],z="sb-squares-data";let g=[],w={quarter:0,score:{top:0,left:0}},P="setup";function a(e,t,n){const r=document.createElement(e);if(typeof t=="string")t&&(r.className=t);else if(t)for(const[s,o]of Object.entries(t))s==="className"?r.className=o:r.setAttribute(s,o);if(n)for(const s of n)r.appendChild(typeof s=="string"?document.createTextNode(s):s);return r}function k(e){return document.createTextNode(e)}function E(e,t,n){const r=a("button",t,[e]);return r.type="button",r.addEventListener("click",n),r}function T(e,t){const n=document.createElement("input");if(n.type=e,t)for(const[r,s]of Object.entries(t))r==="className"?n.className=s:n.setAttribute(r,s);return n}function be(e){const t=document.createElement("select");for(const n of e){const r=document.createElement("option");r.value=n.value,r.textContent=n.label,t.appendChild(r)}return t}function B(e){const t=document.querySelector(".toast");t&&t.remove();const n=a("div","toast",[e]);document.body.appendChild(n),setTimeout(()=>n.remove(),2200)}function R(){if(g.length===0){localStorage.removeItem(z);return}localStorage.setItem(z,X(g))}function ve(){return localStorage.getItem(z)}const F=document.getElementById("app");function x(){F.innerHTML="",F.appendChild(ye()),F.appendChild($e()),P==="setup"?F.appendChild(Ce()):F.appendChild(Se())}function ye(){return a("div","banner",[a("h1","",["Super Bowl Squares"]),a("div","subtitle",["Track your squares, scores, and near-misses"])])}function $e(){const e=a("div","tabs"),t=E("Setup",`${P==="setup"?"active":""}`,()=>{P="setup",x()}),n=E("Scoring",`${P==="scoring"?"active":""}`,()=>{if(g.length===0){B("Load or add boards first");return}P="scoring",x()});return e.appendChild(t),e.appendChild(n),e}function Ce(){const e=a("div","setup-panel"),t=ve();return t&&g.length===0&&e.appendChild(qe(t)),e.appendChild(xe()),e.appendChild(a("div","divider",[k("or")])),e.appendChild(Ne()),g.length>0&&e.appendChild(Ee()),e}function qe(e){const t=a("div","restore-bar");t.appendChild(a("span","",["Previously saved board data found."]));const n=a("div","restore-actions");return n.appendChild(E("Restore","btn btn-primary btn-sm",()=>{try{g=G(e),R(),P="scoring",x()}catch(r){B("Error restoring: "+r.message)}})),n.appendChild(E("Dismiss","btn btn-secondary btn-sm",()=>{localStorage.removeItem(z),x()})),t.appendChild(n),t}function xe(){const e=a("div","setup-section");e.appendChild(a("h3","",["Paste Board Data"]));const t=document.createElement("textarea");t.placeholder=`Paste your board configuration here...

Example:
Office Pool $25 10x10
Chiefs vs Eagles
Top Chiefs 0 1 2 3 4 5 6 7 8 9
Left Eagles 0 1 2 3 4 5 6 7 8 9
Alice, Bob, ...`,t.rows=8,e.appendChild(t);const n=a("div","form-row mt-1");return n.appendChild(E("Add Boards","btn btn-primary",()=>{const r=t.value.trim();if(!r){B("Paste board data first");return}try{const s=G(r);g.push(...s),R(),t.value="",g.length===s.length&&(P="scoring"),x(),B(`Added ${s.length} board(s) (${g.length} total)`)}catch(s){B("Parse error: "+s.message)}})),n.appendChild(E("Replace All","btn btn-secondary",()=>{const r=t.value.trim();if(!r){B("Paste board data first");return}try{g=G(r),R(),P="scoring",x(),B(`Replaced with ${g.length} board(s)`)}catch(s){B("Parse error: "+s.message)}})),e.appendChild(n),e}function Ne(){const e=a("div","setup-section");e.appendChild(a("h3","",["Set Up Manually"]));const t=T("text",{placeholder:"Board name (e.g. Office Pool)",className:""});t.style.flex="1";const n=a("div","form-row",[a("label","",["Name"]),t]);e.appendChild(n);const r=T("number",{placeholder:"25",className:""});r.style.width="6rem";const s=a("div","form-row",[a("label","",["Buy-in ($)"]),r]);e.appendChild(s);const o=be([{value:"10x10",label:"10x10 (100 squares)"},{value:"5x5",label:"5x5 (25 squares)"},{value:"5x10",label:"5x10 (50 squares)"},{value:"10x5",label:"10x5 (50 squares)"}]),i=a("div","form-row",[a("label","",["Size"]),o]);e.appendChild(i);const l=T("checkbox"),u=a("div","form-row",[a("label","",["Reroll"]),l,a("span","text-sm text-muted",["Numbers change each quarter"])]);e.appendChild(u);const d=T("text",{placeholder:"Chiefs",className:""});d.style.flex="1";const p=T("text",{placeholder:"Eagles",className:""});p.style.flex="1";const m=a("div","form-row",[a("label","",["Teams"]),d,a("span","vs-label",["vs"]),p]);e.appendChild(m);const h=T("text",{placeholder:"50 100 150 200 (optional)",className:""});h.style.flex="1";const c=a("div","form-row",[a("label","",["Payouts"]),h]);e.appendChild(c);const f=T("radio",{name:"board-mode",value:"mine"});f.checked=!0;const C=T("radio",{name:"board-mode",value:"full"}),b=a("div","radio-group mt-2",[a("label","",[f,k(" Just my squares")]),a("label","",[C,k(" Full board")])]);e.appendChild(b);const N=a("div","mt-1");N.id="my-squares-input";const L=document.createElement("textarea");L.placeholder=`One square per line:
Chiefs 3, Eagles 7
Chiefs 0, Eagles 2`,L.rows=6,N.appendChild(a("label","text-sm text-muted mb-1",["Enter your squares (one per line):"])),N.appendChild(L),e.appendChild(N);const q=a("div","mt-1 hidden");q.id="full-board-input";const M=T("text",{placeholder:"0 1 2 3 4 5 6 7 8 9",className:""});M.style.flex="1",q.appendChild(a("div","form-row",[a("label","",["Top #s"]),M]));const y=T("text",{placeholder:"0 1 2 3 4 5 6 7 8 9",className:""});y.style.flex="1",q.appendChild(a("div","form-row",[a("label","",["Left #s"]),y]));const j=document.createElement("textarea");j.placeholder=`Grid rows (comma-separated names):
Alice, Bob, Carol, Dave, Eve, Frank, Grace, Hank, Ivy, Jack
...`,j.rows=6,q.appendChild(a("label","text-sm text-muted mb-1",["Grid (one row per line):"])),q.appendChild(j);const v=T("text",{placeholder:"Your name(s), comma-separated",className:"w-full mt-1"});q.appendChild(a("div","form-row mt-1",[a("label","",["Mine"]),v])),e.appendChild(q),f.addEventListener("change",()=>{N.classList.remove("hidden"),q.classList.add("hidden")}),C.addEventListener("change",()=>{N.classList.add("hidden"),q.classList.remove("hidden")});const S=a("div","form-row mt-2");return S.appendChild(E("Add Board","btn btn-primary",()=>{try{const I=Te(t,r,o,l,d,p,h,f,L,M,y,j,v);g.push(I),R(),x(),B("Board added")}catch(I){B("Error: "+I.message)}})),e.appendChild(S),e}function Te(e,t,n,r,s,o,i,l,u,d,p,m,h){const c=e.value.trim()||"Board",f=t.value?parseInt(t.value):void 0,[C,b]=n.value.split("x").map(Number),N=r.checked,L=s.value.trim()||"Team A",q=o.value.trim()||"Team B",M=i.value.trim(),y=M?M.split(/[\s,]+/).map(Number).filter(v=>!isNaN(v)):void 0;if(l.checked){const v=[];let S=c;f!=null&&(S+=` $${f}`),S+=` ${C}x${b}`,N&&(S+=" reroll"),v.push(S),v.push(`${L} vs ${q}`),y&&y.length>0&&v.push("Payouts "+y.join(" "));const I=u.value.trim().split(`
`).filter(A=>A.trim());if(I.length===0)throw new Error("Enter at least one square");return v.push(...I),G(v.join(`
`))[0]}else{const v=[];let S=c;f!=null&&(S+=` $${f}`),S+=` ${C}x${b}`,N&&(S+=" reroll"),S+=" full",v.push(S),v.push(`${L} (top) vs ${q} (left)`),y&&y.length>0&&v.push("Payouts "+y.join(" "));const I=d.value.trim(),A=p.value.trim();if(!I||!A)throw new Error("Enter top and left numbers");v.push(`Top ${L} ${I}`),v.push(`Left ${q} ${A}`);const H=m.value.trim().split(`
`).filter(Z=>Z.trim());if(H.length!==b)throw new Error(`Expected ${b} grid rows, got ${H.length}`);v.push(...H);const _=h.value.trim();return _&&v.push("Mine "+_),G(v.join(`
`))[0]}}function Ee(){var n;const e=a("div","setup-section");e.appendChild(a("h3","",[`Boards (${g.length})`]));for(let r=0;r<g.length;r++){const s=g[r],o=a("div","board-summary"),i=a("div","board-info",[k(`${s.config.name} — ${s.config.cols}x${s.config.rows}`)]),l=a("div","board-meta",[k(`${s.config.topTeam} vs ${s.config.leftTeam}`+(s.fullBoard?" (full board)":` (${((n=s.mySquares)==null?void 0:n.length)??0} squares)`)+(s.config.buyIn?` | $${s.config.buyIn}`:""))]),u=E("Remove","btn btn-danger btn-sm",()=>{g.splice(r,1),R(),x()}),d=a("div","",[i,l]);o.appendChild(d),o.appendChild(u),e.appendChild(o)}const t=a("div","form-row mt-2");return t.appendChild(E("Copy Board Data","btn btn-secondary",()=>{const r=X(g);navigator.clipboard.writeText(r).then(()=>{B("Board data copied to clipboard")}).catch(()=>{B("Could not copy — check permissions")})})),t.appendChild(E("Start Scoring","btn btn-primary",()=>{P="scoring",x()})),e.appendChild(t),e}function Se(){const e=a("div","scoring-panel");e.appendChild(Be());for(const t of g)e.appendChild(Le(t));return e}function Be(){const e=a("div","scoring-header"),t=a("div","quarter-bar"),n=a("span","quarter-label",[we[w.quarter]]),r=a("div","flex gap-sm");w.quarter>0&&r.appendChild(E("Prev Quarter","btn btn-secondary btn-sm",()=>{w.quarter--,x()})),w.quarter<3&&r.appendChild(E("Next Quarter","btn btn-secondary btn-sm",()=>{w.quarter++,x()})),t.appendChild(n),t.appendChild(r),e.appendChild(t);const s=g.length>0?g[0].config.topTeam:"Top",o=g.length>0?g[0].config.leftTeam:"Left",i=a("div","score-row"),l=T("number",{className:"score-input",value:String(w.score.top)});l.min="0";const u=T("number",{className:"score-input",value:String(w.score.left)});u.min="0";const d=a("div","score-group",[a("label","",[s]),l]),p=a("span","score-dash",["–"]),m=a("div","score-group",[u,a("label","",[o])]),h=E("Update","btn btn-primary btn-sm",()=>{w.score.top=parseInt(l.value)||0,w.score.left=parseInt(u.value)||0,x()}),c=f=>{f.key==="Enter"&&(w.score.top=parseInt(l.value)||0,w.score.left=parseInt(u.value)||0,x())};return l.addEventListener("keydown",c),u.addEventListener("keydown",c),i.appendChild(d),i.appendChild(p),i.appendChild(m),i.appendChild(h),e.appendChild(i),e}function Le(e){const t=a("div","board-card"),n=[`${e.config.cols}x${e.config.rows}`,e.config.reroll?"reroll":"",e.config.buyIn?`$${e.config.buyIn}`:""].filter(Boolean).join(" | ");return t.appendChild(a("h3","",[e.config.name])),t.appendChild(a("div","card-meta",[`${e.config.topTeam} vs ${e.config.leftTeam} — ${n}`])),e.fullBoard?(t.appendChild(Pe(e)),t.appendChild(Me(e)),t.appendChild(De(e))):e.mySquares&&t.appendChild(Ie(e)),t}function Me(e){const t=e.fullBoard,n=a("div","form-row mt-1 mine-editor");n.appendChild(a("label","text-sm",["Mine:"]));const r=T("text",{placeholder:"Your names, comma-separated",className:"mine-input",value:t.mySquareNames.join(", ")});r.style.flex="1";const s=E("Set","btn btn-secondary btn-sm",()=>{t.mySquareNames=r.value.split(",").map(o=>o.trim()).filter(o=>o.length>0),R(),x(),B("Updated tracked squares")});return n.appendChild(r),n.appendChild(s),n}function Ie(e){const t=de(e,w),n=a("ul","square-list");return e.mySquares.forEach((r,s)=>{const o=t[s],i=W(e,w.quarter),l=r.quarters[i],u=`${e.config.topTeam} ${$(l.topDigits)}, ${e.config.leftTeam} ${$(l.leftDigits)}`,d=document.createElement("li");if(o.isWinner){d.className="status-winner";let p=`★ WINNER: ${u}`;e.config.payouts&&e.config.payouts[w.quarter]!=null&&(p+=` — $${e.config.payouts[w.quarter]}`),d.textContent=p}else if(o.nearMisses.length>0){d.className="status-near";const p=o.nearMisses.map(m=>`${m.team} +${m.points}`).join(", ");d.textContent=`○ Near: ${u} (${p})`}else d.className="status-dim",d.textContent=`· ${u}`;n.appendChild(d)}),n}function Pe(e){var h;const t=e.fullBoard,n=W(e,w.quarter),r=t.quarters[n],s=V(e,w),o=new Set(t.mySquareNames.map(c=>c.toLowerCase())),i=a("div","grid-table-wrapper"),l=a("table","grid-table"),u=document.createElement("thead"),d=document.createElement("tr"),p=document.createElement("th");p.className="corner",d.appendChild(p);for(let c=0;c<e.config.cols;c++){const f=document.createElement("th");f.textContent=$(r.topNumbers[c]),d.appendChild(f)}u.appendChild(d),l.appendChild(u);const m=document.createElement("tbody");for(let c=0;c<e.config.rows;c++){const f=document.createElement("tr"),C=document.createElement("th");C.textContent=$(r.leftNumbers[c]),f.appendChild(C);for(let b=0;b<e.config.cols;b++){const N=document.createElement("td"),L=((h=t.grid[c])==null?void 0:h[b])??"";N.textContent=L,N.title=L;const q=`${c},${b}`,M=s.get(q),y=[];M!=null&&M.isWinner?y.push("cell-winner"):M&&M.nearMisses.length>0&&y.push("cell-near"),o.has(L.toLowerCase())&&y.push("cell-mine"),y.length>0&&(N.className=y.join(" ")),f.appendChild(N)}m.appendChild(f)}return l.appendChild(m),i.appendChild(l),i}function De(e){var u,d;const t=e.fullBoard,n=W(e,w.quarter),r=t.quarters[n],s=V(e,w),o=new Set(t.mySquareNames.map(p=>p.toLowerCase())),i=a("div","status-summary");for(const[p,m]of s.entries()){const[h,c]=p.split(",").map(Number),f=((u=t.grid[h])==null?void 0:u[c])??"???";if(m.isWinner){const C=o.has(f.toLowerCase()),b=a("div",C?"status-winner":"",[k(`★ Winner: ${f} [${$(r.topNumbers[c])}, ${$(r.leftNumbers[h])}]`)]);C&&e.config.payouts&&e.config.payouts[w.quarter]!=null&&b.appendChild(k(` — $${e.config.payouts[w.quarter]}`)),i.appendChild(b)}}const l=[];for(const[p,m]of s.entries())if(m.nearMisses.length>0){const[h,c]=p.split(",").map(Number),f=((d=t.grid[h])==null?void 0:d[c])??"???";if(o.has(f.toLowerCase())){const C=m.nearMisses.map(b=>`${b.team} +${b.points}`).join(", ");l.push(`○ ${f} [${$(r.topNumbers[c])}, ${$(r.leftNumbers[h])}] (${C})`)}}if(l.length>0)for(const p of l)i.appendChild(a("div","status-near",[p]));if(o.size>0&&l.length===0){let p=!1;for(const[,m]of s.entries())m.isWinner&&m.isMine&&(p=!0);p||i.appendChild(a("div","status-dim text-sm",["No near-misses for your squares this quarter."]))}return i}function ke(){x()}ke();
