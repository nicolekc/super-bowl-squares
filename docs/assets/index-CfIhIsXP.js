(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function W(e){return e.split(/\n\s*---\s*\n/).map(n=>n.trim()).filter(n=>n.length>0).map(ee)}function ee(e){const t=e.split(`
`).map(i=>i.trim()).filter(i=>i.length>0&&!i.startsWith("#"));if(t.length<2)throw new Error("Board needs at least a header and teams line");let n=0;const r=te(t[n++]),s=ne(t[n++]);r.topTeam=s.topTeam,r.leftTeam=s.leftTeam,n<t.length&&/^payouts?\b/i.test(t[n])&&(r.payouts=re(t[n++]));const a=t.slice(n);if(a.length===0)throw new Error("Board must have square data or full board data");return se(a)?{config:r,fullBoard:le(a,r)}:{config:r,mySquares:oe(a,r)}}function te(e){let t=e,n;const r=t.match(/\$(\d+)/);r&&(n=parseInt(r[1]),t=t.replace(r[0]," "));let s=10,a=10;const i=t.match(/\b(5|10)\s*x\s*(5|10)\b/i);if(i)s=parseInt(i[1]),a=parseInt(i[2]),t=t.replace(i[0]," ");else{const d=t.match(/\b(25|50|100)\s*squares?\b/i);if(d){const u=parseInt(d[1]);u===25?(s=5,a=5):u===100?(s=10,a=10):(s=5,a=10),t=t.replace(d[0]," ")}}const l=/\bre-?roll\b/i.test(t);t=t.replace(/\bre-?roll\b/gi," "),t=t.replace(/\bfull\b/gi," ");let p=t.replace(/\s+/g," ").trim();return p||(p="Board"),{name:p,buyIn:n,cols:s,rows:a,reroll:l,topTeam:"",leftTeam:""}}function ne(e){const t=e.match(/(.+?)\s+vs\.?\s+(.+)/i);if(!t)throw new Error(`Expected "Team1 vs Team2", got: "${e}"`);let n=t[1].trim(),r=t[2].trim();const s=/\(left\)/i.test(n),a=/\(top\)/i.test(r),i=l=>l.replace(/\s*\((top|left)\)\s*/gi,"").trim();return n=i(n),r=i(r),s||a?{topTeam:r,leftTeam:n}:{topTeam:n,leftTeam:r}}function re(e){const t=e.match(/^payouts?\s+(.+)/i);return t?t[1].split(/\s+/).map(n=>parseInt(n)).filter(n=>!isNaN(n)):[]}function se(e){const t=e[0];return/^top\s/i.test(t)||/^q[1-4]\s/i.test(t)}function oe(e,t){return e.map(n=>ae(n,t))}function ae(e,t){const n=ie(e,t),r=e.substring(0,n).trim(),s=e.substring(n+1).trim(),a=Y(r,t.topTeam),i=Y(s,t.leftTeam);if(t.reroll){if(a.length!==4||i.length!==4)throw new Error(`Reroll board needs 4 digit-groups per team. Got top=${a.length}, left=${i.length} in: "${e}"`);return{quarters:Array.from({length:4},(l,p)=>({topDigits:a[p],leftDigits:i[p]}))}}if(a.length!==1||i.length!==1)throw new Error(`Non-reroll board needs 1 digit-group per team. Got top=${a.length}, left=${i.length} in: "${e}"`);return{quarters:[{topDigits:a[0],leftDigits:i[0]}]}}function ie(e,t){const n=new RegExp(`,\\s*${K(t.leftTeam)}\\b`,"i"),r=e.match(n);if(r&&r.index!==void 0)return r.index;const s=e.indexOf(",");if(s===-1)throw new Error(`No comma separator in square line: "${e}"`);return s}function Y(e,t){const n=new RegExp(`^${K(t)}\\s+`,"i");return e.replace(n,"").trim().split(/\s+/).map(z)}function z(e){if(e.length===1&&/\d/.test(e))return[parseInt(e)];if(e.length===2&&/\d\d/.test(e))return[parseInt(e[0]),parseInt(e[1])];throw new Error(`Invalid digit group "${e}": expected 1 or 2 digits`)}function le(e,t){let n=0;const r=[];if(t.reroll)for(let i=0;i<4;i++){if(n>=e.length)throw new Error(`Missing Q${i+1} line`);r.push(ce(e[n++],t))}else{if(n+1>=e.length)throw new Error("Need Top and Left lines");const i=J(e[n++],t.cols),l=J(e[n++],t.rows);r.push({topNumbers:i,leftNumbers:l})}const s=[];for(let i=0;i<t.rows;i++){if(n>=e.length)throw new Error(`Missing grid row ${i+1}`);s.push(ue(e[n++],t.cols))}let a=[];return n<e.length&&/^mine\b/i.test(e[n])&&(a=e[n++].replace(/^mine\s+/i,"").split(",").map(l=>l.trim()).filter(l=>l.length>0)),{quarters:r,grid:s,mySquareNames:a}}function ce(e,t){const r=e.replace(/^q[1-4]\s+/i,"").trim().match(/^top\s+(.*?)\s*,\s*left\s+(.*)/i);if(!r)throw new Error(`Expected "Q_ Top ..., Left ..." format in: "${e}"`);const s=U(r[1].trim()),a=U(r[2].trim()),i=s.split(/\s+/).map(z),l=a.split(/\s+/).map(z);if(i.length!==t.cols)throw new Error(`Expected ${t.cols} top numbers, got ${i.length}`);if(l.length!==t.rows)throw new Error(`Expected ${t.rows} left numbers, got ${l.length}`);return{topNumbers:i,leftNumbers:l}}function J(e,t){let n=e.replace(/^(top|left)\s+/i,"").trim();n=U(n);const r=n.split(/\s+/).map(z);if(r.length!==t)throw new Error(`Expected ${t} number groups, got ${r.length} in: "${e}"`);return r}function U(e){const t=e.search(/\d/);return t<=0?e:e.substring(t).trim()}function ue(e,t){if(e.includes(",")){const r=e.split(",").map(s=>s.trim()).filter(s=>s.length>0);if(r.length===t)return r}const n=e.split(/\s+/).filter(r=>r.length>0);if(n.length===t)return n;throw new Error(`Grid row needs ${t} names, couldn't parse: "${e}"`)}function K(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D(e){return Math.abs(e)%10}function F(e,t){return e.config.reroll?t:0}function pe(e,t,n,r,s){const a=D(t),i=D(n),l=e.topDigits.includes(a)&&e.leftDigits.includes(i);if(l)return{isWinner:!0,nearMisses:[]};const p=[];for(const d of[3,7]){const u=D(t+d);e.topDigits.includes(u)&&e.leftDigits.includes(i)&&p.push({team:r,points:d})}for(const d of[3,7]){const u=D(n+d);e.topDigits.includes(a)&&e.leftDigits.includes(u)&&p.push({team:s,points:d})}return{isWinner:l,nearMisses:p}}function de(e,t){if(!e.mySquares)return[];const n=F(e,t.quarter),{topTeam:r,leftTeam:s}=e.config;return e.mySquares.map(a=>{const i=a.quarters[n];return pe(i,t.score.top,t.score.left,r,s)})}function Q(e,t){return e.findIndex(n=>n.includes(t))}function me(e,t,n,r,s){const a=D(t),i=D(n),l=Q(e.topNumbers,a),p=Q(e.leftNumbers,i),d={row:p,col:l},u=[];for(const m of[3,7]){const h=D(t+m),c=Q(e.topNumbers,h);c!==-1&&c!==l&&u.push({pos:{row:p,col:c},nearMiss:{team:r,points:m}})}for(const m of[3,7]){const h=D(n+m),c=Q(e.leftNumbers,h);c!==-1&&c!==p&&u.push({pos:{row:c,col:l},nearMiss:{team:s,points:m}})}return{winnerPos:d,nearMissPositions:u}}function V(e,t){var m,h;if(!e.fullBoard)return new Map;const n=F(e,t.quarter),r=e.fullBoard.quarters[n],{topTeam:s,leftTeam:a}=e.config,i=me(r,t.score.top,t.score.left,s,a),l=new Set(e.fullBoard.mySquareNames.map(c=>c.toLowerCase())),p=new Map,d=`${i.winnerPos.row},${i.winnerPos.col}`,u=((m=e.fullBoard.grid[i.winnerPos.row])==null?void 0:m[i.winnerPos.col])??"";p.set(d,{isWinner:!0,isMine:l.has(u.toLowerCase()),nearMisses:[]});for(const c of i.nearMissPositions){const f=`${c.pos.row},${c.pos.col}`,v=((h=e.fullBoard.grid[c.pos.row])==null?void 0:h[c.pos.col])??"",g=p.get(f);g?g.nearMisses.push(c.nearMiss):p.set(f,{isWinner:!1,isMine:l.has(v.toLowerCase()),nearMisses:[c.nearMiss]})}return p}function $(e){return e.length===2?`${e[0]}${e[1]}`:`${e[0]}`}function X(e){return e.map(fe).join(`
---
`)}function fe(e){const t=[],n=e.config;let r=n.name;return n.buyIn!=null&&(r+=` $${n.buyIn}`),r+=` ${n.cols}x${n.rows}`,n.reroll&&(r+=" reroll"),e.fullBoard&&(r+=" full"),t.push(r),e.fullBoard?t.push(`${n.topTeam} (top) vs ${n.leftTeam} (left)`):t.push(`${n.topTeam} vs ${n.leftTeam}`),n.payouts&&n.payouts.length>0&&t.push("Payouts "+n.payouts.join(" ")),e.fullBoard?t.push(...ge(e.fullBoard,n)):e.mySquares&&t.push(...he(e.mySquares,n)),t.join(`
`)}function he(e,t){return e.map(n=>{if(t.reroll){const r=n.quarters.map(a=>$(a.topDigits)),s=n.quarters.map(a=>$(a.leftDigits));return`${t.topTeam} ${r.join(" ")}, ${t.leftTeam} ${s.join(" ")}`}else{const r=n.quarters[0];return`${t.topTeam} ${$(r.topDigits)}, ${t.leftTeam} ${$(r.leftDigits)}`}})}function ge(e,t){const n=[];if(e.quarters.length===1){const r=e.quarters[0];n.push(`Top ${t.topTeam} ${r.topNumbers.map($).join(" ")}`),n.push(`Left ${t.leftTeam} ${r.leftNumbers.map($).join(" ")}`)}else for(let r=0;r<e.quarters.length;r++){const s=e.quarters[r];n.push(`Q${r+1} Top ${s.topNumbers.map($).join(" ")}, Left ${s.leftNumbers.map($).join(" ")}`)}for(const r of e.grid)n.push(r.join(", "));return e.mySquareNames.length>0&&n.push("Mine "+e.mySquareNames.join(", ")),n}const ye=["Q1","Q2","Q3","Final"],O="sb-squares-data";let y=[],b={quarter:0,score:{top:0,left:0}},P="setup";function o(e,t,n){const r=document.createElement(e);if(typeof t=="string")t&&(r.className=t);else if(t)for(const[s,a]of Object.entries(t))s==="className"?r.className=a:r.setAttribute(s,a);if(n)for(const s of n)r.appendChild(typeof s=="string"?document.createTextNode(s):s);return r}function R(e){return document.createTextNode(e)}function B(e,t,n){const r=o("button",t,[e]);return r.type="button",r.addEventListener("click",n),r}function E(e,t){const n=document.createElement("input");if(n.type=e,t)for(const[r,s]of Object.entries(t))r==="className"?n.className=s:n.setAttribute(r,s);return n}function we(e){const t=document.createElement("select");for(const n of e){const r=document.createElement("option");r.value=n.value,r.textContent=n.label,t.appendChild(r)}return t}function L(e){const t=document.querySelector(".toast");t&&t.remove();const n=o("div","toast",[e]);document.body.appendChild(n),setTimeout(()=>n.remove(),2200)}function j(){if(y.length===0){localStorage.removeItem(O);return}localStorage.setItem(O,X(y))}function be(){return localStorage.getItem(O)}const G=document.getElementById("app");function C(){G.innerHTML="",G.appendChild(ve()),G.appendChild($e()),P==="setup"?G.appendChild(Ce()):G.appendChild(Ee())}function ve(){return o("div","banner",[o("h1","",["Super Bowl Squares"]),o("div","subtitle",["Track your squares, scores, and near-misses"])])}function $e(){const e=o("div","tabs"),t=B("Setup",`${P==="setup"?"active":""}`,()=>{P="setup",C()}),n=B("Scoring",`${P==="scoring"?"active":""}`,()=>{if(y.length===0){L("Load or add boards first");return}P="scoring",C()});return e.appendChild(t),e.appendChild(n),e}function Ce(){const e=o("div","setup-panel"),t=be();return t&&y.length===0&&e.appendChild(qe(t)),e.appendChild(Ne()),e.appendChild(o("div","divider",[R("or")])),e.appendChild(Se()),y.length>0&&e.appendChild(Te()),e}function qe(e){const t=o("div","restore-bar");t.appendChild(o("span","",["Previously saved board data found."]));const n=o("div","restore-actions");return n.appendChild(B("Restore","btn btn-primary btn-sm",()=>{try{y=W(e),j(),P="scoring",C()}catch(r){L("Error restoring: "+r.message)}})),n.appendChild(B("Dismiss","btn btn-secondary btn-sm",()=>{localStorage.removeItem(O),C()})),t.appendChild(n),t}function Ne(){const e=o("div","setup-section");e.appendChild(o("h3","",["Paste Board Data"]));const t=document.createElement("textarea");t.placeholder=`Paste your board configuration here...

Example:
Office Pool $25 10x10
Chiefs vs Eagles
Top Chiefs 0 1 2 3 4 5 6 7 8 9
Left Eagles 0 1 2 3 4 5 6 7 8 9
Alice, Bob, ...`,t.rows=8,e.appendChild(t);const n=o("div","form-row mt-1");return n.appendChild(B("Add Boards","btn btn-primary",()=>{const r=t.value.trim();if(!r){L("Paste board data first");return}try{const s=W(r);y.push(...s),j(),t.value="",y.length===s.length&&(P="scoring"),C(),L(`Added ${s.length} board(s) (${y.length} total)`)}catch(s){L("Parse error: "+s.message)}})),n.appendChild(B("Replace All","btn btn-secondary",()=>{const r=t.value.trim();if(!r){L("Paste board data first");return}try{y=W(r),j(),P="scoring",C(),L(`Replaced with ${y.length} board(s)`)}catch(s){L("Parse error: "+s.message)}})),e.appendChild(n),e}function Se(){const e=o("div","setup-section");e.appendChild(o("h3","",["Set Up Manually"]));const t=E("text",{placeholder:"Board name (e.g. Office Pool)",className:""});t.style.flex="1";const n=o("div","form-row",[o("label","",["Name"]),t]);e.appendChild(n);const r=E("number",{placeholder:"25",className:""});r.style.width="6rem";const s=o("div","form-row",[o("label","",["Buy-in ($)"]),r]);e.appendChild(s);const a=we([{value:"10x10",label:"10x10 (100 squares)"},{value:"5x5",label:"5x5 (25 squares)"},{value:"5x10",label:"5x10 (50 squares)"},{value:"10x5",label:"10x5 (50 squares)"}]),i=o("div","form-row",[o("label","",["Size"]),a]);e.appendChild(i);const l=E("checkbox"),p=o("div","form-row",[o("label","",["Reroll"]),l,o("span","text-sm text-muted",["Numbers change each quarter"])]);e.appendChild(p);const d=E("text",{placeholder:"Chiefs",className:""});d.style.flex="1";const u=E("text",{placeholder:"Eagles",className:""});u.style.flex="1";const m=o("div","form-row",[o("label","",["Teams"]),d,o("span","vs-label",["vs"]),u]);e.appendChild(m);const h=E("text",{placeholder:"50 100 150 200 (optional)",className:""});h.style.flex="1";const c=o("div","form-row",[o("label","",["Payouts"]),h]);e.appendChild(c);const f=E("radio",{name:"board-mode",value:"mine"});f.checked=!0;const v=E("radio",{name:"board-mode",value:"full"}),g=o("div","radio-group mt-2",[o("label","",[f,R(" Just my squares")]),o("label","",[v,R(" Full board")])]);e.appendChild(g);const q=o("div","mt-1");q.id="my-squares-input";const N=document.createElement("textarea");N.placeholder=`One square per line:
Chiefs 3, Eagles 7
Chiefs 0, Eagles 2`,N.rows=6,q.appendChild(o("label","text-sm text-muted mb-1",["Enter your squares (one per line):"])),q.appendChild(N),e.appendChild(q);const S=o("div","mt-1 hidden");S.id="full-board-input";const M=E("text",{placeholder:"0 1 2 3 4 5 6 7 8 9",className:""});M.style.flex="1",S.appendChild(o("div","form-row",[o("label","",["Top #s"]),M]));const x=E("text",{placeholder:"0 1 2 3 4 5 6 7 8 9",className:""});x.style.flex="1",S.appendChild(o("div","form-row",[o("label","",["Left #s"]),x]));const k=document.createElement("textarea");k.placeholder=`Grid rows (comma-separated names):
Alice, Bob, Carol, Dave, Eve, Frank, Grace, Hank, Ivy, Jack
...`,k.rows=6,S.appendChild(o("label","text-sm text-muted mb-1",["Grid (one row per line):"])),S.appendChild(k);const w=E("text",{placeholder:"Your name(s), comma-separated",className:"w-full mt-1"});S.appendChild(o("div","form-row mt-1",[o("label","",["Mine"]),w])),e.appendChild(S),f.addEventListener("change",()=>{q.classList.remove("hidden"),S.classList.add("hidden")}),v.addEventListener("change",()=>{q.classList.add("hidden"),S.classList.remove("hidden")});const T=o("div","form-row mt-2");return T.appendChild(B("Add Board","btn btn-primary",()=>{try{const I=xe(t,r,a,l,d,u,h,f,N,M,x,k,w);y.push(I),j(),C(),L("Board added")}catch(I){L("Error: "+I.message)}})),e.appendChild(T),e}function xe(e,t,n,r,s,a,i,l,p,d,u,m,h){const c=e.value.trim()||"Board",f=t.value?parseInt(t.value):void 0,[v,g]=n.value.split("x").map(Number),q=r.checked,N=s.value.trim()||"Team A",S=a.value.trim()||"Team B",M=i.value.trim(),x=M?M.split(/[\s,]+/).map(Number).filter(w=>!isNaN(w)):void 0;if(l.checked){const w=[];let T=c;f!=null&&(T+=` $${f}`),T+=` ${v}x${g}`,q&&(T+=" reroll"),w.push(T),w.push(`${N} vs ${S}`),x&&x.length>0&&w.push("Payouts "+x.join(" "));const I=p.value.trim().split(`
`).filter(A=>A.trim());if(I.length===0)throw new Error("Enter at least one square");return w.push(...I),W(w.join(`
`))[0]}else{const w=[];let T=c;f!=null&&(T+=` $${f}`),T+=` ${v}x${g}`,q&&(T+=" reroll"),T+=" full",w.push(T),w.push(`${N} (top) vs ${S} (left)`),x&&x.length>0&&w.push("Payouts "+x.join(" "));const I=d.value.trim(),A=u.value.trim();if(!I||!A)throw new Error("Enter top and left numbers");w.push(`Top ${N} ${I}`),w.push(`Left ${S} ${A}`);const H=m.value.trim().split(`
`).filter(Z=>Z.trim());if(H.length!==g)throw new Error(`Expected ${g} grid rows, got ${H.length}`);w.push(...H);const _=h.value.trim();return _&&w.push("Mine "+_),W(w.join(`
`))[0]}}function Te(){var n;const e=o("div","setup-section");e.appendChild(o("h3","",[`Boards (${y.length})`]));for(let r=0;r<y.length;r++){const s=y[r],a=o("div","board-summary"),i=o("div","board-info",[R(`${s.config.name} — ${s.config.cols}x${s.config.rows}`)]),l=o("div","board-meta",[R(`${s.config.topTeam} vs ${s.config.leftTeam}`+(s.fullBoard?" (full board)":` (${((n=s.mySquares)==null?void 0:n.length)??0} squares)`)+(s.config.buyIn?` | $${s.config.buyIn}`:""))]),p=B("Remove","btn btn-danger btn-sm",()=>{y.splice(r,1),j(),C()}),d=o("div","",[i,l]);a.appendChild(d),a.appendChild(p),e.appendChild(a)}const t=o("div","form-row mt-2");return t.appendChild(B("Copy Board Data","btn btn-secondary",()=>{const r=X(y);navigator.clipboard.writeText(r).then(()=>{L("Board data copied to clipboard")}).catch(()=>{L("Could not copy — check permissions")})})),t.appendChild(B("Start Scoring","btn btn-primary",()=>{P="scoring",C()})),e.appendChild(t),e}function Ee(){const e=o("div","scoring-panel");e.appendChild(Le());const t=Be();t&&e.appendChild(t);for(const n of y)e.appendChild(Me(n));return e}function Be(){var r;const e=[];for(const s of y){const a=F(s,b.quarter),i=new Set,l=new Set;if(s.mySquares&&s.mySquares.length>0)for(const u of s.mySquares){const m=u.quarters[a];for(const h of m.topDigits)i.add(h);for(const h of m.leftDigits)l.add(h)}else if(s.fullBoard&&s.fullBoard.mySquareNames.length>0){const u=s.fullBoard,m=u.quarters[a],h=new Set(u.mySquareNames.map(c=>c.toLowerCase()));for(let c=0;c<s.config.rows;c++)for(let f=0;f<s.config.cols;f++){const v=((r=u.grid[c])==null?void 0:r[f])??"";if(h.has(v.toLowerCase())){for(const g of m.topNumbers[f])i.add(g);for(const g of m.leftNumbers[c])l.add(g)}}}if(i.size===0&&l.size===0)continue;const p=u=>[...u].sort((m,h)=>m-h),d=o("div","digit-summary-board",[o("div","digit-summary-name",[s.config.name]),o("div","digit-summary-row",[o("span","digit-summary-team",[s.config.topTeam+":"]),o("span","digit-summary-digits",["["+p(i).join(", ")+"]"])]),o("div","digit-summary-row",[o("span","digit-summary-team",[s.config.leftTeam+":"]),o("span","digit-summary-digits",["["+p(l).join(", ")+"]"])])]);e.push(d)}if(e.length===0)return null;const t=o("div","digit-summary");t.appendChild(o("div","digit-summary-title",["My Digits This Quarter"]));const n=o("div","digit-summary-grid");for(const s of e)n.appendChild(s);return t.appendChild(n),t}function Le(){const e=o("div","scoring-header"),t=o("div","quarter-bar"),n=o("span","quarter-label",[ye[b.quarter]]),r=o("div","flex gap-sm");b.quarter>0&&r.appendChild(B("Prev Quarter","btn btn-secondary btn-sm",()=>{b.quarter--,C()})),b.quarter<3&&r.appendChild(B("Next Quarter","btn btn-secondary btn-sm",()=>{b.quarter++,C()})),t.appendChild(n),t.appendChild(r),e.appendChild(t);const s=y.length>0?y[0].config.topTeam:"Top",a=y.length>0?y[0].config.leftTeam:"Left",i=o("div","score-row"),l=E("number",{className:"score-input",value:String(b.score.top)});l.min="0";const p=E("number",{className:"score-input",value:String(b.score.left)});p.min="0";const d=o("div","score-group",[o("label","",[s]),l]),u=o("span","score-dash",["–"]),m=o("div","score-group",[p,o("label","",[a])]),h=B("Update","btn btn-primary btn-sm",()=>{b.score.top=parseInt(l.value)||0,b.score.left=parseInt(p.value)||0,C()}),c=f=>{f.key==="Enter"&&(b.score.top=parseInt(l.value)||0,b.score.left=parseInt(p.value)||0,C())};return l.addEventListener("keydown",c),p.addEventListener("keydown",c),i.appendChild(d),i.appendChild(u),i.appendChild(m),i.appendChild(h),e.appendChild(i),e}function Me(e){const t=o("div","board-card"),n=[`${e.config.cols}x${e.config.rows}`,e.config.reroll?"reroll":"",e.config.buyIn?`$${e.config.buyIn}`:""].filter(Boolean).join(" | ");return t.appendChild(o("h3","",[e.config.name])),t.appendChild(o("div","card-meta",[`${e.config.topTeam} vs ${e.config.leftTeam} — ${n}`])),e.fullBoard?(t.appendChild(De(e)),t.appendChild(Ie(e)),t.appendChild(ke(e))):e.mySquares&&t.appendChild(Pe(e)),t}function Ie(e){const t=e.fullBoard,n=o("div","form-row mt-1 mine-editor");n.appendChild(o("label","text-sm",["Mine:"]));const r=E("text",{placeholder:"Your names, comma-separated",className:"mine-input",value:t.mySquareNames.join(", ")});r.style.flex="1";const s=B("Set","btn btn-secondary btn-sm",()=>{t.mySquareNames=r.value.split(",").map(a=>a.trim()).filter(a=>a.length>0),j(),C(),L("Updated tracked squares")});return n.appendChild(r),n.appendChild(s),n}function Pe(e){const t=de(e,b),n=o("ul","square-list");return e.mySquares.forEach((r,s)=>{const a=t[s],i=F(e,b.quarter),l=r.quarters[i],p=`${e.config.topTeam} ${$(l.topDigits)}, ${e.config.leftTeam} ${$(l.leftDigits)}`,d=document.createElement("li");if(a.isWinner){d.className="status-winner";let u=`★ WINNER: ${p}`;e.config.payouts&&e.config.payouts[b.quarter]!=null&&(u+=` — $${e.config.payouts[b.quarter]}`),d.textContent=u}else if(a.nearMisses.length>0){d.className="status-near";const u=a.nearMisses.map(m=>`${m.team} +${m.points}`).join(", ");d.textContent=`○ Near: ${p} (${u})`}else d.className="status-dim",d.textContent=`· ${p}`;n.appendChild(d)}),n}function De(e){var h;const t=e.fullBoard,n=F(e,b.quarter),r=t.quarters[n],s=V(e,b),a=new Set(t.mySquareNames.map(c=>c.toLowerCase())),i=o("div","grid-table-wrapper"),l=o("table","grid-table"),p=document.createElement("thead"),d=document.createElement("tr"),u=document.createElement("th");u.className="corner",d.appendChild(u);for(let c=0;c<e.config.cols;c++){const f=document.createElement("th");f.textContent=$(r.topNumbers[c]),d.appendChild(f)}p.appendChild(d),l.appendChild(p);const m=document.createElement("tbody");for(let c=0;c<e.config.rows;c++){const f=document.createElement("tr"),v=document.createElement("th");v.textContent=$(r.leftNumbers[c]),f.appendChild(v);for(let g=0;g<e.config.cols;g++){const q=document.createElement("td"),N=((h=t.grid[c])==null?void 0:h[g])??"";q.textContent=N,q.title=N;const S=`${c},${g}`,M=s.get(S),x=["cell-clickable"],k=a.has(N.toLowerCase());M!=null&&M.isWinner?x.push("cell-winner"):M&&M.nearMisses.length>0&&x.push("cell-near"),k&&x.push("cell-mine"),q.className=x.join(" "),q.addEventListener("click",()=>{if(!N)return;const w=N.toLowerCase();a.has(w)?t.mySquareNames=t.mySquareNames.filter(T=>T.toLowerCase()!==w):t.mySquareNames.push(N),j(),C()}),f.appendChild(q)}m.appendChild(f)}return l.appendChild(m),i.appendChild(l),i}function ke(e){var p,d;const t=e.fullBoard,n=F(e,b.quarter),r=t.quarters[n],s=V(e,b),a=new Set(t.mySquareNames.map(u=>u.toLowerCase())),i=o("div","status-summary");for(const[u,m]of s.entries()){const[h,c]=u.split(",").map(Number),f=((p=t.grid[h])==null?void 0:p[c])??"???";if(m.isWinner){const v=a.has(f.toLowerCase()),g=o("div",v?"status-winner":"",[R(`★ Winner: ${f} [${$(r.topNumbers[c])}, ${$(r.leftNumbers[h])}]`)]);v&&e.config.payouts&&e.config.payouts[b.quarter]!=null&&g.appendChild(R(` — $${e.config.payouts[b.quarter]}`)),i.appendChild(g)}}const l=[];for(const[u,m]of s.entries())if(m.nearMisses.length>0){const[h,c]=u.split(",").map(Number),f=((d=t.grid[h])==null?void 0:d[c])??"???";if(a.has(f.toLowerCase())){const v=m.nearMisses.map(g=>`${g.team} +${g.points}`).join(", ");l.push(`○ ${f} [${$(r.topNumbers[c])}, ${$(r.leftNumbers[h])}] (${v})`)}}if(l.length>0)for(const u of l)i.appendChild(o("div","status-near",[u]));if(a.size>0&&l.length===0){let u=!1;for(const[,m]of s.entries())m.isWinner&&m.isMine&&(u=!0);u||i.appendChild(o("div","status-dim text-sm",["No near-misses for your squares this quarter."]))}return i}function Re(){C()}Re();
